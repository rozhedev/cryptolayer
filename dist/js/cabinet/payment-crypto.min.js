document.addEventListener('DOMContentLoaded', () => {

    const invoiceId = document.getElementById('invoice-id'),
        curOutput = document.getElementById('cur-output'),
        amountOutput = document.getElementById('amount-output'),
        daysOutput = document.getElementById('days-output'),
        amountValue = document.getElementById('amount-value'),
        addressValue = document.getElementById('address-value');

    const timeOutput = document.querySelector('.pay-crypto__bill-time'),
        copyAmount = document.getElementById('copy-amount'),
        amountTooltip = document.getElementById('amount-tooltip'),
        copyAddress = document.getElementById('copy-address'),
        addressTooltip = document.getElementById('address-tooltip');

    let data, time;
    time = 3600;

    function timeCount() {
        let minutes = Math.floor(time / 60);
        let seconds = time % 60;

        seconds = seconds < 10 ? '0' + seconds : seconds;
        time--;

        timeOutput.textContent = `${minutes} m ${seconds} s`;
    }

    timeCount();
    setInterval(timeCount, 1000);

    data = JSON.parse(localStorage.getItem('creditailsData'))
    console.log(data);

    function setCreditails() {
        invoiceId.textContent = data.invoiceId;
        curOutput.textContent = data.paymentMethod;
        amountOutput.textContent = data.invAmount;
        daysOutput.textContent = data.miningPeriod;
        amountValue.value = data.invAmount;
        addressValue.value = data.cryptoWallet;
        console.log(data.cryptoWallet);
    }

    setCreditails();

    function copyData(btn, content, tooltip) {
        if (btn) {
            btn.addEventListener('click', function () {
                content.select();
                document.execCommand('copy');
                tooltip.textContent = 'Copied!';
            });
        }
    }

    copyData(copyAmount, amountValue, amountTooltip);
    copyData(copyAddress, addressValue, addressTooltip);
})